{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mark Your Attendance</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Lucide icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- Google font -->
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* ----------  CSS VARIABLES  ---------- */
    :root {
      --primary: #6366f1;
      --primary-light: #818cf8;
      --primary-dark: #4f46e5;
      --bg-main: #ffffff;
      --bg-secondary: #f8fafc;
      --text-primary: #1e293b;
      --text-secondary: #64748b;
      --border: #e2e8f0;
      --radius: 12px;
      --shadow: 0 4px 6px -1px rgba(0,0,0,.08);
    }
    [data-theme="dark"] {
      --bg-main: #0f172a;
      --bg-secondary: #1e293b;
      --text-primary: #f1f5f9;
      --text-secondary: #cbd5e1;
      --border: #334155;
    }

    /* ----------  RESET  ---------- */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Plus Jakarta Sans', sans-serif;
      background: var(--bg-main);
      color: var(--text-primary);
      display: flex;
      min-height: 100vh;
      transition: background .3s, color .3s;
    }
    a { color: inherit; text-decoration: none; }

    /* ----------  SIDEBAR  ---------- */
    .sidebar {
      width: 260px;
      background: var(--bg-secondary);
      border-right: 1px solid var(--border);
      padding: 1.5rem 1rem;
      display: flex;
      flex-direction: column;
      gap: .75rem;
      position: fixed;
      height: 100%;
      left: 0; top: 0;
      z-index: 1000;
      transition: transform .3s;
    }
    .sidebar.open { transform: translateX(0); }
    .logo {
      display: flex; align-items: center; gap: .75rem;
      font-weight: 700; font-size: 1.25rem;
      margin-bottom: 1.5rem; padding-bottom: 1rem;
      border-bottom: 1px solid var(--border);
    }
    .logo-icon {
      width: 40px; height: 40px;
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      border-radius: var(--radius);
      display: grid; place-items: center; color: #fff;
    }
    .nav-item {
      display: flex; align-items: center; gap: .75rem;
      padding: .95rem 1rem;
      border-radius: var(--radius);
      font-size: .95rem;
      transition: background .2s, color .2s, transform .2s;
      position: relative;
    }
    .nav-item:hover { background: var(--bg-main); color: var(--primary); }
    .nav-item.active { background: var(--primary); color: #fff; }
    .nav-item svg { width: 20px; height: 20px; stroke-width: 2; }

    /* ----------  MAIN  ---------- */
    .main-content { flex: 1; margin-left: 250px; padding: 2rem; padding-bottom: 5rem; }
    .header {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 2rem;
    }
    .header h1 { font-size: 1.75rem; font-weight: 700; }
    .theme-toggle {
      width: 40px; height: 40px; border-radius: var(--radius);
      border: 1px solid var(--border); background: var(--bg-secondary);
      display: grid; place-items: center; cursor: pointer;
      transition: transform .3s;
    }
    .theme-toggle:hover { transform: rotate(20deg) scale(1.1); }

        /* ----------  SNAPSHOT CARDS  ---------- */
    .snapshot-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
      gap:1.25rem;
      margin-bottom:2rem;
    }
    .snap-card{
      background:var(--bg-secondary);
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding: 0.75rem 1.25rem;
      text-align:center;
      transition:transform .2s, box-shadow .2s;
    }
    .snap-card:hover{
      transform:translateY(-4px);
      box-shadow:var(--shadow);
    }
    .snap-number{
      font-size:1.75rem;
      font-weight:700;
      color:var(--primary);
      line-height:1;
    }
    .snap-label{
      margin-top:.5rem;
      font-size:.760rem;
      color:var(--text-secondary);
    }
    .snap-card {
      height: 80px;
      
      overflow: hidden;
    }

    /* ----------  CARDS  ---------- */
    .actions-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1.45rem;
      margin-bottom: 3rem;
    }
    .card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 2rem 1.5rem;
      text-align: center;
      transition: transform .2s, box-shadow .2s;
    }
    .card:hover { transform: translateY(-4px); box-shadow: var(--shadow); }
    .card-icon {
      width: 56px; height: 56px; margin: 0 auto 1rem;
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      border-radius: var(--radius);
      display: grid; place-items: center; color: #fff;
    }
    .card-icon svg { width: 28px; height: 28px; stroke-width: 2; }

    /* ----------  MOBILE  ---------- */
    .menu-toggle {
      display: none; position: fixed; top: 1rem; left: 1rem; z-index: 1100;
      width: 42px; height: 42px; border-radius: var(--radius);
      border: none; background: var(--primary); color: #fff;
      place-items: center; cursor: pointer;
    }
    @media (max-width: 768px) {
      .sidebar { transform: translateX(-100%); }
      .main-content { margin-left: 0; padding: 3.5rem 1rem 2rem; }
      .menu-toggle { display: grid; }
    }
  </style>
</head>

<body data-theme="light">
  <!-- =====  MOBILE HAMBURGER  ===== -->
  <button class="menu-toggle" id="menuToggle" aria-label="Open menu">
    <i data-lucide="menu" width="22" height="22"></i>
  </button>

  <!-- =====  SIDEBAR  ===== -->
  <aside class="sidebar" id="sidebar">
    <div class="logo">
      <div class="logo-icon"><i data-lucide="scan-face"></i></div>
      <span>Face Attendance</span>
    </div>

    <nav>
      <a href="{% url 'register_employee' %}" class="nav-item active">
        <i data-lucide="user-plus"></i> Student Registration
      </a>
      <a href="{% url 'employee-list' %}" class="nav-item">
        <i data-lucide="users"></i> View Students
      </a>
      <a href="{% url 'capture_and_recognize' %}" class="nav-item">
        <i data-lucide="camera"></i> Mark Attendance
      </a>
      <a href="{% url 'emp_attendance_list' %}" class="nav-item">
        <i data-lucide="list-checks"></i> Attendance Log
      </a>
      <a href="{% url 'camera_config_list' %}" class="nav-item">
        <i data-lucide="settings"></i> Camera Config
      </a>
    </nav>
  </aside>

  <!-- =====  MAIN CONTENT  ===== -->
  <main class="main-content">
    <header class="header">
      <div>
        <h1>Welcome Back !</h1>
        <p style="color:var(--text-secondary)">Manage your attendance system efficiently</p>
      </div>
      <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
        <i data-lucide="sun" width="20" height="20"></i>
      </button>
    </header>

        <!-- =====  TODAYâ€™S ATTENDANCE SNAPSHOT  ===== -->
    <section>
      <div class="snapshot-grid">
        <div class="snap-card">
          <div class="snap-number">156</div>
          <div class="snap-label">Present Today</div>
        </div>
        <div class="snap-card">
          <div class="snap-number">142</div>
          <div class="snap-label">Total Students</div>
        </div>
        <div class="snap-card">
          <div class="snap-number">91<span style="font-size:.6em;margin-left:2px">%</span></div>
          <div class="snap-label">Attendance Rate</div>
        </div>
      </div>
    </section>

    <section>
      <div class="actions-grid">
        <a href="{% url 'register_employee' %}" class="card">
          <div class="card-icon"><i data-lucide="user-plus"></i></div>
          <h3>Register Student</h3>
          <p style="color:var(--text-secondary);font-size:.875rem">Add a new student to the dataset</p>
        </a>

        <a href="{% url 'employee-list' %}" class="card">
          <div class="card-icon"><i data-lucide="users"></i></div>
          <h3>View / Authorise</h3>
          <p style="color:var(--text-secondary);font-size:.875rem">Browse or edit student profiles</p>
        </a>

        <a href="{% url 'capture_and_recognize' %}" class="card">
          <div class="card-icon"><i data-lucide="camera"></i></div>
          <h3>Mark Attendance</h3>
          <p style="color:var(--text-secondary);font-size:.875rem">Live camera recognition</p>
        </a>

        <a href="{% url 'emp_attendance_list' %}" class="card">
          <div class="card-icon"><i data-lucide="list-checks"></i></div>
          <h3>Attendance Log</h3>
          <p style="color:var(--text-secondary);font-size:.875rem">Daily / monthly reports</p>
        </a>

        <a href="{% url 'camera_config_list' %}" class="card">
          <div class="card-icon"><i data-lucide="settings"></i></div>
          <h3>Camera Config</h3>
          <p style="color:var(--text-secondary);font-size:.875rem">IP address, resolution, etc.</p>
        </a>
      </div>
    </section>
    <div style="height: 60px;"></div>
  </main>

  <!-- =====  JS  ===== -->
  <script>
    /* lucide icons */
    lucide.createIcons();

    /* ------ theme switcher ------ */
    const body = document.body;
    const themeBtn = document.getElementById('themeToggle');
    const themeIcon = themeBtn.querySelector('i');

    /* restore saved theme or default light */
    const saved = localStorage.getItem('theme') || 'light';
    body.setAttribute('data-theme', saved);
    themeIcon.setAttribute('data-lucide', saved === 'dark' ? 'moon' : 'sun');
    lucide.createIcons();

    themeBtn.addEventListener('click', () => {
      const current = body.getAttribute('data-theme');
      const next = current === 'dark' ? 'light' : 'dark';
      body.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
      themeIcon.setAttribute('data-lucide', next === 'dark' ? 'moon' : 'sun');
      lucide.createIcons();
    });

    /* ------ mobile menu ------ */
    const menuBtn = document.getElementById('menuToggle');
    const sidebar = document.getElementById('sidebar');

    menuBtn.addEventListener('click', () => {
      sidebar.classList.toggle('open');
    });

    /* close sidebar after clicking a link on mobile */
    document.querySelectorAll('.nav-item').forEach(link => {
      link.addEventListener('click', () => {
        if (window.innerWidth <= 768) sidebar.classList.remove('open');
      });
    });
  </script>
</body>
</html>